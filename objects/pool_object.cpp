#include "pool_object.h"
#include "scene_object.h"
#include <QPainter>
#include <QBrush>

#include <local_2d.h>
#include <global_2d.h>
#include <polar_2d.h>


pool_object::pool_object(const Global2d center, QObject* parent) :
    SceneObject(parent),
    center_(center)
{
    QList<Global2d> pool_g = {
        Global2d(55.69444932013666,37.949025558110826),
        Global2d(55.701308389363405,37.95610540014584),
        Global2d(55.70231412298012,37.95634143453913),
        Global2d(55.70243529395058,37.95612685781794),
        Global2d(55.70231412298012,37.95591228109676),
        Global2d(55.702411059786684,37.955654789031314),
        Global2d(55.70264128373449,37.95582645040829),
        Global2d(55.70297518168009,37.95464087529675),
        Global2d(55.70287824627875,37.95421172185438),
        Global2d(55.702551087516554,37.95408297582164),
        Global2d(55.702114871555096,37.95369673772352),
        Global2d(55.70148477320044,37.95354653401868),
        Global2d(55.701145485245235,37.953567991690804),
        Global2d(55.700939487543536,37.95380402608412),
        Global2d(55.70072137114148,37.953482161002334),
        Global2d(55.70066078303506,37.953095922904176),
        Global2d(55.70053960653928,37.9533534149696),
        Global2d(55.70051537119483,37.95361090703504),
        Global2d(55.70036995881128,37.953289041953255),
        Global2d(55.70045478276771,37.953010092215706),
        Global2d(55.70051537119483,37.95264531178968),
        Global2d(55.70045478276771,37.95225907369152),
        Global2d(55.70041842966617,37.95182992024916),
        Global2d(55.700309370157775,37.95137930913464),
        Global2d(55.700151839217206,37.95060683293835),
        Global2d(55.700030661136736,37.950263510184456),
        Global2d(55.70004277896176,37.94994164510267),
        Global2d(55.700067014600485,37.94916916890636),
        Global2d(55.7001154858327,37.94846106572644),
        Global2d(55.70013972142615,37.947474012808954),
        Global2d(55.7001033680303,37.94715214772717),
        Global2d(55.699885246942095,37.94678736730114),
        Global2d(55.69966712463141,37.94616509480969),
        Global2d(55.699436883088346,37.94620801015393),
        Global2d(55.699267230553424,37.94558573766249),
        Global2d(55.6989763959159,37.94539261861341),
        Global2d(55.69849166669039,37.945843229727906),
        Global2d(55.69816447105035,37.946079264121224),
        Global2d(55.69794633909553,37.94599343343275),
        Global2d(55.69797057603977,37.94528533025281),
        Global2d(55.69752219012817,37.94498492284315),
        Global2d(55.697194986338026,37.945027838187386),
        Global2d(55.69696473017013,37.94599343343275),
        Global2d(55.69681930452017,37.94652987523572),
        Global2d(55.696746591491426,37.946851740317506),
        Global2d(55.69667387832686,37.94736672444837),
        Global2d(55.696286072488306,37.94798899693981),
        Global2d(55.695667998946966,37.94826794667737),
        Global2d(55.69524382515153,37.94850398107068),
        Global2d(55.69494084103907,37.94861126943128),
        Global2d(55.694637854568256,37.948589811759156),
        Global2d(55.69454431071345,37.948773188772805),
        Global2d(55.69444932013666,37.949025558110826)
    };

    for (const auto& point : pool_g){
        pool_.append(center_.transition(point).local());
    }

}

void pool_object::paint(Orentation* orentation, QPainter* painter){

    QPolygonF pool_q;
    for(const auto& point : pool_){
        pool_q.append(orentation->toQPoint(point));
    }
    QColor br_color(105, 222, 242, 50);
    QBrush brush(br_color);


    QColor color_ = QColor(0,0,255);
    painter->setPen(color_);
    painter->setBrush(brush);
    painter->drawPolygon(pool_q);
}




